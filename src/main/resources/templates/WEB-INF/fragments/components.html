<!DOCTYPE html>
<html lang="en" xmlns:th="http://www.thymeleaf.org">
<body>
<header th:fragment="header">
  <div class="row">
    <div class="col-1 px-4">
      <img class="px-1" src="/img/aviasales.svg" style="padding: 3px" width="60" height="60">
    </div>
    <div class="col-8 py-1">
      <a href="/" style="text-decoration: none;color: black"><h1>Avisales</h1></a>
    </div>
    <div class="col-3 px-4">

        <div class="auth px-4" style="text-decoration: none" id="authLinks">
        </div>
    </div>
    </div>



  </div>



  <script>

    function fillAuthLinks() {
      const authLinks = document.querySelector('#authLinks');
      authLinks.innerHTML = "";

      if(window.localStorage.getItem("JWT")) {
        const signOut = document.createElement("button");
        signOut.onclick = () => {
          localStorage.clear();
          fillAuthLinks();
        };
        signOut.classList.add('no-link');
        signOut.classList.add('btn');
        signOut.classList.add('btn-primary')
        signOut.style.margin="10px"
        signOut.innerHTML = "Sign Out";
        const profile = document.createElement("button");
        profile.onclick = () => {
          window.location.assign("/profile");
        };
        profile.classList.add('no-link');
        profile.classList.add('btn');
        profile.classList.add('btn-primary')
        profile.style.margin="10px"
        profile.innerHTML = "Profile";

        authLinks.appendChild(signOut);
        authLinks.appendChild(profile)
      } else {
        const signIn = document.createElement("a");
        signIn.href = "/signin";
        signIn.classList.add('no-link');
        signIn.classList.add('btn')
        signIn.classList.add('btn-primary')
        signIn.style.margin="10px";
        signIn.innerHTML = "Sign In ";

        const signUp = document.createElement("a");
        signUp.href = "/signup";
        signUp.classList.add('no-link');
        signUp.classList.add('btn');
        signUp.classList.add('btn-primary')
        signUp.style.margin="10px";
        signUp.innerHTML = "Sign Up";

        authLinks.appendChild(signIn);
        authLinks.appendChild(signUp);
      }

      window.dispatchEvent(new Event("updateProducts"));
    }

    fillAuthLinks();
  </script>
</header>

<footer th:fragment="footer">
  <script src="https://cdn.jsdelivr.net/npm/@popperjs/core@2.10.2/dist/umd/popper.min.js" integrity="sha384-7+zCNj/IqJ95wo16oMtfsKbZ9ccEh31eOz1HGyDuCQ6wgnyJNSYdrPa03rtR1zdB" crossorigin="anonymous"></script>
  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/js/bootstrap.min.js" integrity="sha384-QJHtvGhmr9XOIpI6YVutG+2QOK9T+ZnN4kzFN1RtK3zEFEIsxhlmWl5/YESvpZ13" crossorigin="anonymous"></script>
</footer>
</body>
</html>